<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">

    <link rel="icon" href="/practices/favicon.png">

    <meta property='og:image' content="https://devgeniem.github.io/practices/images/gdev-logo.png"/>
    <meta property='og:url' content="https://devgeniem.github.io/tyokalut/rakenne/">
    <link rel="image_src" href="https://devgeniem.github.io/practices/images/gdev-logo.png" / >
    <link rel="shortcut icon" href="https://devgeniem.github.io/practices/favicon.png">

    <title>Geniem Best Practices : Projektin rakenne</title>
    <meta property='og:title' content="Geniem Best Practices : Projektin rakenne"/>
    <meta property='og:site_name' content="Best Practices">
    <meta property="og:type" content="website" />

    
        <meta property='og:description' content="Kansiorakenne

"/>
        <meta name='twitter:description' content="Kansiorakenne

"/>
    

    <meta name="twitter:site" content="@Geniemfi">
    <meta name="summary" content="twitter:card">
    <meta name='twitter:title' content="Geniem Best Practices : Projektin rakenne"/>
    <meta name="twitter:image:src" content="https://devgeniem.github.io/practices/images/gdev-logo.png">


    <meta name="description" content="Ohjeet hyvään kehitykseen">

    
    <meta name="google-site-verification" content="" />
    

    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

    
    <script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/practices/assets/main.css">
    <link href='https://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>

</head>

    <body>
        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <div class="row header-bar">
  <div class="col-md-8 col-sm-8">
    <h4><a class="brand" href="/practices/">Geniem Best Practices</a>
        <small>Ohjeet hyvään kehitykseen</small>
    </h4>
  </div>
  <div class="col-md-4 col-sm-4">

  </div>
</div>

                </div>
            </div>

            <div class="row">
                
                
                    <div id="navigation" class="col-sm-2">
                        <!-- Html Elements for Search -->
<div id="search-container">
  <input type="text" id="search-input" class="btn btn-default" placeholder="Etsi...">
</div>

<ul class="nav nav-list">
    <li class="nav-header">Best Practices</li>
    <li class=><a href="/practices/">Johdanto</a></li>
    <li class="divider"></li>
    
        
        

        
            

            
                
                    
                        <li class="nav-header">Kehitys</li>
                    
                    <li data-order="1"><a href="/practices/kehitys/html/">HTML</a></li>
                
            
                
                    
                    <li data-order="2"><a href="/practices/kehitys/css/">CSS</a></li>
                
            
                
                    
                    <li data-order="3"><a href="/practices/kehitys/javascript/">JavaScript</a></li>
                
            
                
                    
                    <li data-order="4"><a href="/practices/kehitys/php/">PHP</a></li>
                
            
            
                <li class="divider"></li>
            
        
    
        
        

        
            

            
                
                    
                        <li class="nav-header">Design</li>
                    
                    <li data-order="1"><a href="/practices/design/ux/">UX</a></li>
                
            
                
                    
                    <li data-order="2"><a href="/practices/design/prototyypit/">Prototyypit</a></li>
                
            
                
                    
                    <li data-order="3"><a href="/practices/design/testaus/">Testaus</a></li>
                
            
            
                <li class="divider"></li>
            
        
    
        
        

        
    
        
        

        
            

            
                
                    
                        <li class="nav-header">Projektit & työkalut</li>
                    
                    <li data-order="1"><a href="/practices/tyokalut/rakenne/">Projektin rakenne</a></li>
                
            
                
                    
                    <li data-order="2"><a href="/practices/tyokalut/kehitys/">Kehityksen työkalut</a></li>
                
            
                
                    
                    <li data-order="3"><a href="/practices/tyokalut/versionhallinta/">Versionhallinta</a></li>
                
            
                
                    
                    <li data-order="4"><a href="/practices/tyokalut/dokumentointi/">Dokumentointi</a></li>
                
            
            
        
    
    <!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                    </div>
                    <div id="content" class="col-sm-10">
                        <div class="page-header">
      <div class="row">
        <div class="col-md-7">
          <h1>Projektin rakenne
              
          </h1>
        </div>
        <div class="col-md-5 edit-buttons">
          <a href="https://github.com/devgeniem/practices/edit/gh-pages/_posts/2016-12-09-rakenne.md" class="btn btn-default pull-right-md pull-left-sm">
    <i class="glyphicon glyphicon-file"></i> Muokkaa
</a>

        </div>
      </div>
</div>



<h3 id="kansiorakenne">Kansiorakenne</h3>

<p>Yhtenäinen projektin kansiorakenne mahdollistaa jokaiselle kehittäjälle saman tutun aihion käyttämisen projektin aloittamiseen. Myös support ja jatkokehitys on huomattavasti helpompaa, jos kaikki kehittäjät tietävät projektista riippumatta, missä tiedostot sijaitsevat. Geniemillä on WordPress-projekteihin kaksi pohjaa: <a href="https://git.geniem.io/geniem/dustpress-theme-boilerplate">Dustpress boilerplate</a> sekä tavallinen <a href="#">WordPress boilerplate</a>.</p>

<p>Kaikkien tulevien projektien tulee pohjautua näihin projektirakenteisiin. Alla dustpress-boilerplaten teematiedostot avattuna.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>|- assets/
|  |- fonts/ _____________________________ # Theme fonts
|  |- images/ ____________________________ # Theme images
|  |- scripts/
|    |- main.js __________________________ # Main JS used file to concatenate the imported scripts
|    |- app.js ___________________________ # A sample JS file
|  |- styles/ ____________________________ # Theme styles
|    |- common/ __________________________ #
|       |- _fonts.scss _____________________ # font styles
|       |- _global.scss ____________________ # global styles
|       |- _helper.scss ____________________ # helper styles
|       |- _variables.scss _________________ # variables
|       |- _wp-classes.scss ________________ # classes used by wp
|    |- main.scss/ _______________________ # Main scss used to concatenate the imported styles
|- dist/ _________________________________ # Concatenated and minified assets generated
|  |- scripts/ ___________________________ # Dist scripts
|  |- styles/ ____________________________ # Dist styles
|- lang/ _________________________________ # Theme language files
|- lib/ __________________________________ # Theme functions
|- node_modules/ _________________________ # npm modules
|- models/ _______________________________ # Dustpress models
|  |- shared/ ____________________________ # Shared models
|- partials/ _____________________________ # Template parts
|  |- shared/ ____________________________ # Shared partials
|- 404.php _______________________________ # site 404 template
|- favicon.png ___________________________ # site favicon
|- functions.php _________________________ # The main functions file used to import files from the lib/ folder
|- index.php _____________________________ # Site index template needed by wordpress
|- package.json __________________________ # package file for the npm modules
|- README.md _____________________________ # theme readme
|- screenshot.png ________________________ # theme screenshot for WP admin
|- README.md _____________________________ # theme readme
|- style.css _____________________________ # style skeleton file needed by wordpress
|- webpack.config.js _____________________ # webpack config file
</code></pre>
</div>

<h3 id="kolmannen-osapuolen-integraatiot">Kolmannen osapuolen integraatiot</h3>

<p>Kaikki kolmannen osapuolen integraatiot tulee olla dokumentoituna projektin juuressa <code class="highlighter-rouge">INTEGRATIONS.md</code> nimisessä tiedostossa. Integraatiot tulee dokumentoida yksi kerrallaan ja niistä tulee kertoa  kaikki oleellinen, kuten nimi, kuvaus, käyttötarkoitus, mahdolliset endpointit sekä niiden käyttö / triggeröinti lisädokumentaatioon linkkaus, jos sellainen löytyy.</p>

<p>Esimerkki:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>## POF API
Partio-ohjelman rajapinta WP:n artikkeleille.

### Ajastus ja toiminta
Kerran päivässä Wordpress kutsuu tiettyä annettua URL:ia, joka palauttaa JSONina puun artikkeleiden ID:itä, URLeja ja niiden muokkausaikoja. Kun artikkeli on muuttunut, kutsutaan sen URL:ia, josta saadaan artikkelin JSON. Tämä JSON importataan WordPressiin tehdyn PHP-importerin avulla artikkeliksi tietokantaan.

### Endpointit
- http://osoite.com/POF/articletree
- http://osoite.com/POF/article

### Lisädokumentaatio
- http://osoite.com/POF/documentation
</code></pre>
</div>

<h3 id="api-keyt-ja-tunnukset">API Keyt ja tunnukset</h3>

<p>Tunnuksia kolmannen osapuolen integraatioihin ja API:en avaimia ei tule koskaan hardkoodata projekteihin koodiin, vaan sen sijaan hallita erillisessä paikassa. Tähän paikkaan (esim. Confluence tai muu vastaava wiki) tulee tarjota osoite ja kuvaus <code class="highlighter-rouge">INTEGRATIONS.md</code> tiedostossa, jotta kaikki projektin kehittäjät tietävät mistä ne löytää.</p>

<p>Jos API-avaimia tai muita tunnuksia on pakko käyttää projektin koodissa, tulee ne määritellä erillisessä config-tiedostossa constanteiksi, esimerkiksi WordPres-projekteissa <code class="highlighter-rouge">wp-config.php</code>-tiedostossa, tai siinä tiedostossa, josta generoidaan wp-config.</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// Määritellään vakio config-tiedostossa
</span><span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">defined</span><span class="p">(</span> <span class="s1">'CLIENT_MANDRILL_API_KEY'</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span> <span class="nx">ENV_DEVELOPMENT</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nb">define</span><span class="p">(</span> <span class="s1">'CLIENT_MANDRILL_API_KEY'</span><span class="p">,</span> <span class="s1">'1234567890'</span> <span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Lokaalissa ympäristössä tulee aina määrittää <code class="highlighter-rouge">ENV_DEVELOPMENT</code> arvoksi <code class="highlighter-rouge">true</code>, jotta tuotantoympäristöön tarkoitettu koodi ei ajaudu vahingossa lokaalissa ympäristössä.</p>

<h3 id="modulaarinen-koodi">Modulaarinen koodi</h3>

<p>Jokainen koodi tulisi kirjoittaa mahdollisimman modulaariseksi ja uudelleenkäytettäväksi.
<!---
### Pluginit
----></p>

<h3 id="composerjson">Composer.json</h3>

<p>Jokaisessa projektissa tulee olla mukana <code class="highlighter-rouge">composer.json</code> tiedosto, vaikkei siinä itsessään olisikaan Composerilla hallittuja riippuvuuksia.</p>

<p>Every project, whether it includes Composer-managed dependencies or not, <em>must</em> contain a <code class="highlighter-rouge">composer.json</code> file defining the project so it can in turn be pulled in to <em>other</em> projects via Composer.  For example:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"geniem/{project name}"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wordpress-plugin"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"minimum-stability"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"require-dev"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nt">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dist"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"... stable archive package URI ..."</span><span class="p">,</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zip"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="riippuvuudet">Riippuvuudet</h3>

<p>Projekteissa on kahta eri riippuvuutta ja paketinhallintaa:</p>

<ul>
  <li><a href="http://npmjs.org">npm</a> JS ja muut assetit. Webpack ym.</li>
  <li><a href="http://getcomposer.org">Composer</a> PHP-riippuvuudet, kuten pluginit</li>
</ul>

<p>Paketinhallinnan kautta ladattuja riippuvuuksia ei laiteta versionhallintaan mukaan, vaan niitä pidetään tallessa lokaalisti. Tällöin git-repository säilyy selkeänä ja tiiviinä.</p>


                    </div>
                    <!--googleoff: all -->
                    <div class="col-sm-10" id="search-results-box" style="display: none">
                        <div class="search-header">
                            <h1>Hakutulokset</h1>
                        </div>
                        <ul id="results-container"></ul>
                    </div>
                    <!--googleon: all -->

                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    <p>Dokumentaation projektiin <a href="https://github.com/devgeniem/practices">Best Practices</a> tuottanut <a href="http://geniem.fi/">Geniem Oy</a>.</p>

<!-- Script pointing to jekyll-search.js -->
<script src="/practices/bower_components/simple-jekyll-search/dest/jekyll-search.js" type="text/javascript"></script>
<script src="/practices/assets/main.js" type="text/javascript"></script>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
    </body>
</html>
